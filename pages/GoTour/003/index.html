<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Go模块教程 | 土肥猿的面经园地</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="程序员的面经园地和知识仓库">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.8a73fe64.css" as="style"><link rel="preload" href="/assets/js/app.7d1116cd.js" as="script"><link rel="preload" href="/assets/js/2.f6c26bfc.js" as="script"><link rel="preload" href="/assets/js/3.7a437186.js" as="script"><link rel="preload" href="/assets/js/21.51a48402.js" as="script"><link rel="prefetch" href="/assets/js/10.046d08d1.js"><link rel="prefetch" href="/assets/js/11.5c5abcc8.js"><link rel="prefetch" href="/assets/js/12.f62d9829.js"><link rel="prefetch" href="/assets/js/13.4da237a9.js"><link rel="prefetch" href="/assets/js/14.48133eb7.js"><link rel="prefetch" href="/assets/js/15.48a2e085.js"><link rel="prefetch" href="/assets/js/16.81c035c3.js"><link rel="prefetch" href="/assets/js/17.5efa7f95.js"><link rel="prefetch" href="/assets/js/18.86e07264.js"><link rel="prefetch" href="/assets/js/19.2c2a487d.js"><link rel="prefetch" href="/assets/js/20.c4ffcb54.js"><link rel="prefetch" href="/assets/js/22.bf514554.js"><link rel="prefetch" href="/assets/js/23.d4182788.js"><link rel="prefetch" href="/assets/js/24.4dbd20f7.js"><link rel="prefetch" href="/assets/js/25.700af0f5.js"><link rel="prefetch" href="/assets/js/26.ae7d5d12.js"><link rel="prefetch" href="/assets/js/27.1d660e1f.js"><link rel="prefetch" href="/assets/js/28.e301b416.js"><link rel="prefetch" href="/assets/js/29.0fd72cb1.js"><link rel="prefetch" href="/assets/js/30.63cb3594.js"><link rel="prefetch" href="/assets/js/31.e64cb78c.js"><link rel="prefetch" href="/assets/js/32.fe425a1c.js"><link rel="prefetch" href="/assets/js/33.27558bfc.js"><link rel="prefetch" href="/assets/js/34.d0b64862.js"><link rel="prefetch" href="/assets/js/4.9ccfb5d5.js"><link rel="prefetch" href="/assets/js/5.573dfa2c.js"><link rel="prefetch" href="/assets/js/6.655bfde6.js"><link rel="prefetch" href="/assets/js/7.babcfb3d.js"><link rel="prefetch" href="/assets/js/8.71593ea4.js"><link rel="prefetch" href="/assets/js/9.b9ccbf27.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8a73fe64.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/FatMonkey550.png" alt="土肥猿的面经园地" class="logo"> <span class="site-name can-hide">土肥猿的面经园地</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面经园地" class="dropdown-title"><a href="/pages/b5188c/" class="link-title">面经园地</a> <span class="title" style="display:none;">面经园地</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/interView/java/001/" class="nav-link">Java基础面试高频问题1~80</a></li><li class="dropdown-subitem"><a href="/pages/interView/java/002/" class="nav-link">Spring面试高频问题1~10</a></li><li class="dropdown-subitem"><a href="/pages/interView/java/003/" class="nav-link">MyBatis面试高频问题1~18</a></li><li class="dropdown-subitem"><a href="/pages/interView/java/004/" class="nav-link">Java架构师面试高频问题</a></li></ul></li><li class="dropdown-item"><h4>Dotnet</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/interView/DotNet/001/" class="nav-link">Dotnet面试题汇总1</a></li></ul></li><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/interView/DB/001/" class="nav-link">Oracle面试题1-33</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发笔记" class="dropdown-title"><a href="/pages/43f8ea/" class="link-title">开发笔记</a> <span class="title" style="display:none;">开发笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>架构设计</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/43f8ea/" class="nav-link">面向对象设计五大原则</a></li><li class="dropdown-subitem"><a href="/pages/e08693/" class="nav-link">微服务常用组件</a></li></ul></li><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/Notes/java/001/" class="nav-link">Java常用中间件</a></li><li class="dropdown-subitem"><a href="/pages/Notes/java/002/" class="nav-link">Java常用工作流</a></li></ul></li><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/Notes/Python/miniServer/000/" class="nav-link">面向测试方法开发Python微服务</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中文翻译" class="dropdown-title"><!----> <span class="title" style="display:;">中文翻译</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Go语言文档中文翻译</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/GoTour/000/" class="nav-link">序言和目录</a></li><li class="dropdown-subitem"><a href="/pages/GoTour/001/" class="nav-link">Go语言的下载和安装</a></li><li class="dropdown-subitem"><a href="/pages/GoTour/002/" class="nav-link">Go语言入门教程</a></li><li class="dropdown-subitem"><a href="/pages/GoTour/003/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Go模块教程</a></li><li class="dropdown-subitem"><a href="/pages/GoTour/004/" class="nav-link">使用Go和Gin开发RESTful API</a></li><li class="dropdown-subitem"><a href="/pages/GoTour/005/" class="nav-link">使用Go开发Web应用程序</a></li></ul></li><li class="dropdown-item"><h4>Python-PyAutoGui文档中文翻译</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/python/PyAutoGui/001/" class="nav-link">1.Windows11下PyAutoGui的安装和使用</a></li></ul></li><li class="dropdown-item"><h4>微软UI自动化文档中文翻译</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/Microsoft/UIAutomation/000/" class="nav-link">UI自动化课程简介</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="职场随笔" class="dropdown-title"><a href="/pages/893e69/" class="link-title">职场随笔</a> <span class="title" style="display:none;">职场随笔</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>失业笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/unemploymentLog/Day000/" class="nav-link">2003清明，失业第0天</a></li><li class="dropdown-subitem"><a href="/pages/unemploymentLog/Day001/" class="nav-link">2003-04-06，失业第一周·第1天</a></li><li class="dropdown-subitem"><a href="/pages/unemploymentLog/Day002/" class="nav-link">2003-04-07，失业第一周·第2天</a></li><li class="dropdown-subitem"><a href="/pages/unemploymentLog/Day003/" class="nav-link">2003-04-08~09，失业第一周·双休</a></li><li class="dropdown-subitem"><a href="/pages/unemploymentLog/Day004/" class="nav-link">2003-04-08~09，失业第二周·第1天</a></li></ul></li></ul></div></div> <a href="https://github.com/qingshansima/qingshansima.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面经园地" class="dropdown-title"><a href="/pages/b5188c/" class="link-title">面经园地</a> <span class="title" style="display:none;">面经园地</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/interView/java/001/" class="nav-link">Java基础面试高频问题1~80</a></li><li class="dropdown-subitem"><a href="/pages/interView/java/002/" class="nav-link">Spring面试高频问题1~10</a></li><li class="dropdown-subitem"><a href="/pages/interView/java/003/" class="nav-link">MyBatis面试高频问题1~18</a></li><li class="dropdown-subitem"><a href="/pages/interView/java/004/" class="nav-link">Java架构师面试高频问题</a></li></ul></li><li class="dropdown-item"><h4>Dotnet</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/interView/DotNet/001/" class="nav-link">Dotnet面试题汇总1</a></li></ul></li><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/interView/DB/001/" class="nav-link">Oracle面试题1-33</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发笔记" class="dropdown-title"><a href="/pages/43f8ea/" class="link-title">开发笔记</a> <span class="title" style="display:none;">开发笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>架构设计</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/43f8ea/" class="nav-link">面向对象设计五大原则</a></li><li class="dropdown-subitem"><a href="/pages/e08693/" class="nav-link">微服务常用组件</a></li></ul></li><li class="dropdown-item"><h4>Java</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/Notes/java/001/" class="nav-link">Java常用中间件</a></li><li class="dropdown-subitem"><a href="/pages/Notes/java/002/" class="nav-link">Java常用工作流</a></li></ul></li><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/Notes/Python/miniServer/000/" class="nav-link">面向测试方法开发Python微服务</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中文翻译" class="dropdown-title"><!----> <span class="title" style="display:;">中文翻译</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Go语言文档中文翻译</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/GoTour/000/" class="nav-link">序言和目录</a></li><li class="dropdown-subitem"><a href="/pages/GoTour/001/" class="nav-link">Go语言的下载和安装</a></li><li class="dropdown-subitem"><a href="/pages/GoTour/002/" class="nav-link">Go语言入门教程</a></li><li class="dropdown-subitem"><a href="/pages/GoTour/003/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Go模块教程</a></li><li class="dropdown-subitem"><a href="/pages/GoTour/004/" class="nav-link">使用Go和Gin开发RESTful API</a></li><li class="dropdown-subitem"><a href="/pages/GoTour/005/" class="nav-link">使用Go开发Web应用程序</a></li></ul></li><li class="dropdown-item"><h4>Python-PyAutoGui文档中文翻译</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/python/PyAutoGui/001/" class="nav-link">1.Windows11下PyAutoGui的安装和使用</a></li></ul></li><li class="dropdown-item"><h4>微软UI自动化文档中文翻译</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/Microsoft/UIAutomation/000/" class="nav-link">UI自动化课程简介</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="职场随笔" class="dropdown-title"><a href="/pages/893e69/" class="link-title">职场随笔</a> <span class="title" style="display:none;">职场随笔</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>失业笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/unemploymentLog/Day000/" class="nav-link">2003清明，失业第0天</a></li><li class="dropdown-subitem"><a href="/pages/unemploymentLog/Day001/" class="nav-link">2003-04-06，失业第一周·第1天</a></li><li class="dropdown-subitem"><a href="/pages/unemploymentLog/Day002/" class="nav-link">2003-04-07，失业第一周·第2天</a></li><li class="dropdown-subitem"><a href="/pages/unemploymentLog/Day003/" class="nav-link">2003-04-08~09，失业第一周·双休</a></li><li class="dropdown-subitem"><a href="/pages/unemploymentLog/Day004/" class="nav-link">2003-04-08~09，失业第二周·第1天</a></li></ul></li></ul></div></div> <a href="https://github.com/qingshansima/qingshansima.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="sidebar-slot sidebar-slot-top">
  <a href="http://apifox.cn/a103xugaoyi" target="_blank">
    <img src="https://cdn.staticaly.com/gh/xugaoyi/blog-gitalk-comment@master/img/431669861564_.2470ykdcpbds.jpg" alt="npm" class="no-zoom" style="width: 100%;border-radius: 2px;">
    <p style="text-align: center;margin: 0;color: #999;font-size: 12px;">(进入注册为作者充电)</p>
  </a></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Go语言文档中文翻译</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/GoTour/000/" class="sidebar-link">序言和目录</a></li><li><a href="/pages/GoTour/001/" class="sidebar-link">Go语言的下载和安装</a></li><li><a href="/pages/GoTour/002/" class="sidebar-link">Go语言入门教程</a></li><li><a href="/pages/GoTour/003/" aria-current="page" class="active sidebar-link">Go模块教程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/GoTour/003/#创建你的-go-模块" class="sidebar-link">创建你的 Go 模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/GoTour/003/#学习准备" class="sidebar-link">学习准备</a></li><li class="sidebar-sub-header level3"><a href="/pages/GoTour/003/#开发一个其他人也能使用的模块" class="sidebar-link">开发一个其他人也能使用的模块</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/GoTour/003/#从其他模块中调用你的代码" class="sidebar-link">从其他模块中调用你的代码</a></li><li class="sidebar-sub-header level2"><a href="/pages/GoTour/003/#返回与错误处理" class="sidebar-link">返回与错误处理</a></li><li class="sidebar-sub-header level2"><a href="/pages/GoTour/003/#返回随机问候语" class="sidebar-link">返回随机问候语</a></li><li class="sidebar-sub-header level2"><a href="/pages/GoTour/003/#为多人返回问候语" class="sidebar-link">为多人返回问候语</a></li><li class="sidebar-sub-header level2"><a href="/pages/GoTour/003/#创建单元测试" class="sidebar-link">创建单元测试</a></li><li class="sidebar-sub-header level2"><a href="/pages/GoTour/003/#go-应用程序的编译和安装" class="sidebar-link">Go 应用程序的编译和安装</a></li></ul></li><li><a href="/pages/GoTour/004/" class="sidebar-link">教程：使用Go和Gin开发RESTful API</a></li><li><a href="/pages/GoTour/005/" class="sidebar-link">使用Go开发Web应用程序</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Python-PyAutoGui文档中文翻译</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/python/PyAutoGui/001/" class="sidebar-link">01.Windows11下PyAutoGui的安装和使用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>微软UIAutomation文档翻译.md</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/Microsoft/UIAutomation/000/" class="sidebar-link">UI自动化课程简介</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>openpyxl文档中文翻译.md</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/Python/openpyxlDoc/000/" class="sidebar-link">openpyxl文档中文翻译</a></li><li><a href="/pages/720440/" class="sidebar-link">课程·安装</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06970110><div class="articleInfo" data-v-06970110><ul class="breadcrumbs" data-v-06970110><li data-v-06970110><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06970110></a></li> <li data-v-06970110><span data-v-06970110>中文翻译</span></li><li data-v-06970110><span data-v-06970110>Go语言文档中文翻译</span></li></ul> <div class="info" data-v-06970110><div title="作者" class="author iconfont icon-touxiang" data-v-06970110><a href="https://qingshansima.github.io" target="_blank" title="作者" class="beLink" data-v-06970110>飞翔的土肥猿</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06970110><a href="javascript:;" data-v-06970110>2023-04-10</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Go模块教程<!----></h1> <div class="page-slot page-slot-top">
    <div class="wwads-cn wwads-horizontal page-wwads" data-id="136"></div>
    <style>
      .page-wwads{
        width:100%!important;
        min-height: 0;
        margin: 0;
      }
      .page-wwads .wwads-img img{
        width:80px!important;
      }
      .page-wwads .wwads-poweredby{
        width: 40px;
        position: absolute;
        right: 25px;
        bottom: 3px;
      }
      .wwads-content .wwads-text, .page-wwads .wwads-text{
        height: 100%;
        padding-top: 5px;
        display: block;
      }
  </style>
  </div> <div class="theme-vdoing-content content__default"><h2 id="创建你的-go-模块"><a href="#创建你的-go-模块" class="header-anchor">#</a> 创建你的 Go 模块</h2> <p>这是教程的第一部分，介绍了 Go 语言的一些基本功能。如果你刚开始使用Go语言，一定要看一下教程：Go 入门，它介绍了 Go 命令、Go 模块和非常简单的 Go 代码。</p> <p>在本教程中，您将创建两个模块。第一种是打算由其他库或应用程序导入的库。第二个是将使用第一个的调用方应用程序。</p> <p>本教程的顺序包括七个简短的主题，每个主题都说明了语言的不同部分。</p> <ol><li>创建一个模块——编写一个小模块，其中包含可以从另一个模块调用的函数。</li> <li>从另一个模块调用您的代码--导入并使用您的新模块。</li> <li>返回并处理错误--添加简单的错误处理。</li> <li>返回一个随机的 greetings——处理切片中的数据（Go 的动态大小数组）。</li> <li>为多个人返回 greetings--将键/值对存储在映射中。</li> <li>添加测试--使用 Go 内置的单元测试功能来测试代码。</li> <li>编译并安装应用程序--在本地编译并安装代码。</li></ol> <blockquote><p>注意: 有关其他课程, 参见 <a href="/pages/GoTour/003/" aria-current="page" class="router-link-exact-active router-link-active">Go 语言中文文档</a>.</p></blockquote> <h3 id="学习准备"><a href="#学习准备" class="header-anchor">#</a> 学习准备</h3> <ul><li>一些编程经验。这里的代码非常简单，但了解函数、循环和数组会有所帮助。</li> <li>用于编辑代码的工具。您拥有的任何文本编辑器都可以正常工作。大多数文本编辑器都很好地支持 Go。最受欢迎的是 VSCode（免费）、GoLand（付费）和 Vim（免费）。</li> <li>一个命令终端。Go 在 Linux 和 Mac 上以及 Windows 中的 PowerShell 或 cmd 上使用任何终端都能很好地工作。</li></ul> <h3 id="开发一个其他人也能使用的模块"><a href="#开发一个其他人也能使用的模块" class="header-anchor">#</a> 开发一个其他人也能使用的模块</h3> <p>首先创建 Go 模块。在一个模块中，您可以为一组离散且有用的函数收集一个或多个相关的包。例如，您可以创建一个包含包的模块，这些包具有进行财务分析的功能，以便其他编写财务应用程序的人可以使用您的工作。有关开发模块的更多信息，请参阅开发和发布模块。</p> <p>Go 代码被分组到包中，包被分组到模块中。您的模块指定运行代码所需的依赖项，包括 Go 版本及其所需的一组其他模块。</p> <p>当您在模块中添加或改进功能时，您将发布模块的新版本。编写调用模块中函数的代码的开发人员可以导入模块的更新包，并在将其投入生产使用之前使用新版本进行测试。</p> <ol><li>打开一个命令提示符并 cd 到您的主目录。
在 Linux 或 Mac 上：</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span>
</code></pre></div><p>在 Windows 上：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> %HOMEPATH%
</code></pre></div><ol start="2"><li>为 Go 模块的源代码创建一个主目录。</li></ol> <p>例如，在主目录中使用以下命令：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> greetings
<span class="token builtin class-name">cd</span> greetings
</code></pre></div><ol start="3"><li>使用 go-mod-init 命令初始化模块。</li></ol> <p>运行 go-mod-init 命令，给它你的模块路径——在这里，使用 example.com/greetings。如果你发布了一个模块，这必须是 go 工具可以下载你的模块的路径。那将是您的代码存储库。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ go mod init example.com/greetings
go: creating new go.mod: module example.com/greetings
</code></pre></div><p>go-mod-init 命令创建一个 go.mod 文件来跟踪代码的依赖关系。到目前为止，该文件只包括模块的名称和代码支持的 Go 版本。但当你添加依赖项时，go.mod 文件会列出你的代码所依赖的版本。这可以保持构建的可复制性，并让你直接控制要使用的模块版本。</p> <ol start="4"><li>在文本编辑器中，创建一个用于编写代码的文件，并将其命名为 greetings.go。</li> <li>将以下代码粘贴到 greetings.go 文件中并保存该文件。</li></ol> <div class="language-Go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> greetings

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// Hello returns a greeting for the named person.</span>
<span class="token keyword">func</span> <span class="token function">Hello</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token comment">// Return a greeting that embeds the name in a message.</span>
    message <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Hi, %v. Welcome!&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
    <span class="token keyword">return</span> message
<span class="token punctuation">}</span>
</code></pre></div><p>这是您的第一份模块代码。它会向任何需要问候的来访者返回 greetings。您将在下一步中编写调用此函数的代码。</p> <p>在此代码中，您：</p> <ul><li>声明一个 greetings 包以容纳相关函数。</li> <li>实现 Hello 函数以返回 greetings。</li> <li>此函数接受一个类型为字符串的名称参数。该函数还返回一个字符串。在 Go 中，名称以大写字母开头的函数可以由不在同一个包中的函数调用。这在 Go 中被称为导出名称。有关导出名称的详细信息，请参阅 Go tour 中的导出名称。<br> <img src="http://docscn.studygolang.com/doc/tutorial/images/function-syntax.png" alt="函数说明"></li> <li>声明一个消息变量来保存您的 greetings。
在 Go 中，：=运算符是在一行中声明和初始化变量的快捷方式（Go 使用右侧的值来确定变量的类型）。从长远来看，你可能会这样写：</li></ul> <div class="language-Go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> message <span class="token builtin">string</span>
message <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Hi, %v. Welcome!&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
</code></pre></div><br>
*使用fmt包的Sprintf函数可以创建一条问候消息。第一个参数是一个格式字符串，Sprintf将name参数的值替换为%v格式谓词。插入name参数的值将完成greetings文本。
* 将格式化的greetings文本返回给呼叫者。
<p>下一课，您将从另一个模块调用此函数。</p> <h2 id="从其他模块中调用你的代码"><a href="#从其他模块中调用你的代码" class="header-anchor">#</a> 从其他模块中调用你的代码</h2> <p>在上一节中，您创建了一个 grteeings 模块。在本节中，您将编写代码来调用刚刚编写的模块中的 Hello 函数。您将编写可以作为应用程序执行的代码，并调用 grteeings 模块中的代码。</p> <blockquote><p>注意：本主题是从创建 Go 模块开始的多部分教程的一部分。</p></blockquote> <ol><li>为 Go 模块的源代码创建一个 hello 目录。</li></ol> <p>创建此目录后，您应该在层次结构的同一级别同时拥有 hello 和 greetings 目录，如下所示：</p> <div class="language-Go extra-class"><pre class="language-go"><code><span class="token operator">&lt;</span>home<span class="token operator">&gt;</span><span class="token operator">/</span>
 <span class="token operator">|</span><span class="token operator">--</span> greetings<span class="token operator">/</span>
 <span class="token operator">|</span><span class="token operator">--</span> hello<span class="token operator">/</span>
</code></pre></div><p>例如，如果命令提示符位于 greetings 目录中，则可以使用以下命令：</p> <div class="language-Go extra-class"><pre class="language-go"><code>cd <span class="token punctuation">.</span><span class="token punctuation">.</span>
mkdir hello
cd hello
</code></pre></div><ol start="2"><li>为即将编写的代码启用依赖项跟踪。
要为代码启用依赖项跟踪，请运行 go-mod-init 命令，为其提供代码所在模块的名称。</li></ol> <p>出于本教程的目的，请使用 example.com/hello 作为模块路径。</p> <div class="language-Go extra-class"><pre class="language-go"><code>$ <span class="token keyword">go</span> mod init example<span class="token punctuation">.</span>com<span class="token operator">/</span>hello
<span class="token keyword">go</span><span class="token punctuation">:</span> creating <span class="token builtin">new</span> <span class="token keyword">go</span><span class="token punctuation">.</span>mod<span class="token punctuation">:</span> module example<span class="token punctuation">.</span>com<span class="token operator">/</span>hello
</code></pre></div><ol start="3"><li>在文本编辑器的 hello 目录中，创建一个用于编写代码的文件，并将其命名为 hello.go。</li> <li>编写代码调用 Hello 函数，然后打印函数的返回值。
要做到这一点，请将以下代码粘贴到 hello.go 中。</li></ol> <div class="language-Go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>

    <span class="token string">&quot;example.com/greetings&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Get a greeting message and print it.</span>
    message <span class="token operator">:=</span> greetings<span class="token punctuation">.</span><span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">&quot;Gladys&quot;</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在此代码中，您：</p> <ul><li>声明一个主程序包。在 Go 中，作为应用程序执行的代码必须在主包中。</li> <li>导入两个包：example.com/greetings 和 fmt 包。这使您的代码可以访问这些包中的函数。导入 example.com/greetings（包含在您之前创建的模块中的包）可以访问 Hello 函数。您还可以导入 fmt，它具有处理输入和输出文本的功能（例如将文本打印到控制台）。</li> <li>通过调用问候软件包的 Hello 功能来获得返回的 greetings。</li></ul> <ol start="5"><li>编辑 example.com/hello 模块以使用您本地的 example.com/hellos 模块。</li></ol> <p>对于生产使用，您可以从其存储库中发布 example.com/helles 模块（带有反映其发布位置的模块路径），Go 工具可以在那里找到它来下载。目前，由于您尚未发布该模块，您需要调整 example.com/hello 模块，以便它可以在本地文件系统中找到 example.com/hellos 代码。</p> <p>要做到这一点，请使用 go mod edit 命令编辑 example.com/hello 模块，将 go 工具从其模块路径（模块不在的地方）重定向到本地目录（模块所在的地方）。</p> <ol><li>在 hello 目录中的命令提示符下，运行以下命令：</li></ol> <div class="language-Shell extra-class"><pre class="language-shell"><code>go mod edit <span class="token parameter variable">-replace</span> example.com/greetings<span class="token operator">=</span><span class="token punctuation">..</span>/greetings
</code></pre></div><p>该命令指定 example.com/greetings 应替换为../greetings，用于查找依赖项。运行该命令后，hello 目录中的 go.mod 文件应包含一个 replace 指令：</p> <div class="language-Go extra-class"><pre class="language-go"><code>module example<span class="token punctuation">.</span>com<span class="token operator">/</span>hello
<span class="token keyword">go</span> <span class="token number">1.16</span>
replace example<span class="token punctuation">.</span>com<span class="token operator">/</span>greetings <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>greetings
</code></pre></div><ol start="2"><li>在 hello 目录中的命令提示符下，运行 go mod 整洁命令来同步 example.com/hello 模块的依赖项，添加代码所需但尚未在模块中跟踪的依赖项。</li></ol> <div class="language-Shell extra-class"><pre class="language-shell"><code>go mod tidy
go: found example.com/greetings <span class="token keyword">in</span> example.com/greetings v0.0.0-00010101000000-000000000000
</code></pre></div><p>命令完成后，example.com/hello 模块的 go.mod 文件应该如下所示：</p> <div class="language-Go mod extra-class"><pre class="language-go"><code>module example<span class="token punctuation">.</span>com<span class="token operator">/</span>hello
<span class="token keyword">go</span> <span class="token number">1.16</span>
replace example<span class="token punctuation">.</span>com<span class="token operator">/</span>greetings <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>greetings
require example<span class="token punctuation">.</span>com<span class="token operator">/</span>greetings v0<span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">-</span><span class="token number">00010101000000</span><span class="token operator">-</span><span class="token number">000000000000</span>
</code></pre></div><p>该命令在 greetings 目录中找到了本地代码，然后添加了一个 require 指令，指定 example.com/hello 需要 example.com/greetings。您在 hello.go 中导入 greetings 包时创建了此依赖项。</p> <p>模块路径后面的数字是一个伪版本号——一个生成的数字，用来代替语义版本号（模块还没有）。</p> <p>要引用已发布的模块，go.mod 文件通常会省略 replace 指令，并使用末尾带有标记版本号的 require 指令。</p> <div class="language-Go extra-class"><pre class="language-go"><code>require example<span class="token punctuation">.</span>com<span class="token operator">/</span>greetings v1<span class="token punctuation">.</span><span class="token number">1.0</span>
</code></pre></div><p>有关版本号的更多信息，请参阅<a href="http://docscn.studygolang.com/doc/modules/version-numbers" target="_blank" rel="noopener noreferrer">模块版本号<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <ol start="6"><li>在 hello 目录中的命令提示符下，运行您的代码以确认它是否工作。</li></ol> <div class="language-Go Commond extra-class"><pre class="language-go"><code>$ <span class="token keyword">go</span> run <span class="token punctuation">.</span>
Hi<span class="token punctuation">,</span> Gladys<span class="token punctuation">.</span> Welcome<span class="token operator">!</span>
</code></pre></div><p>恭喜！您已经编写了两个功能模块。</p> <p>在下一个主题中，您将添加一些错误处理。</p> <h2 id="返回与错误处理"><a href="#返回与错误处理" class="header-anchor">#</a> 返回与错误处理</h2> <p>处理错误是实体代码的一个基本特征。在本节中，您将添加一些代码，从 greetings 模块返回一个错误，然后在调用者中进行处理。</p> <blockquote><p>注意：本主题是从创建 Go 模块开始的多部分教程的一部分。</p></blockquote> <ol><li>在 greetings/greetings.go 中，添加下面突出显示的代码。</li></ol> <p>如果你不知道该向谁打招呼，那么问候是没有意义的。如果名称为空，则向调用方返回一个错误。将以下代码复制到 greetings.go 中并保存该文件。</p> <div class="language-Go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> greetings

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;errors&quot;</span>
    <span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// Hello returns a greeting for the named person.</span>
<span class="token keyword">func</span> <span class="token function">Hello</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If no name was given, return an error with a message.</span>
    <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;empty name&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// If a name was received, return a value that embeds the name</span>
    <span class="token comment">// in a greeting message.</span>
    message <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Hi, %v. Welcome!&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
    <span class="token keyword">return</span> message<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在此代码中，您：</p> <ul><li>更改函数，使其返回两个值：一个字符串和一个错误。您的调用者将检查第二个值以查看是否发生错误。（任何 Go 函数都可以返回多个值。有关详细信息，请参阅<a href="http://docscn.studygolang.com/doc/effective_go.html#multiple-returns" target="_blank" rel="noopener noreferrer">Effective Go.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。）</li> <li>导入 Go 标准库错误包，以便您可以使用其 errors.New 函数。</li> <li>添加 if 语句以检查无效请求（名称应为空字符串），如果请求无效则返回错误。errors.New 函数返回一个错误，其中包含您的消息。</li> <li>在成功返回中添加 nil（表示没有错误）作为第二个值。这样，调用者就可以看到函数成功了。</li></ul> <ol start="2"><li>在 hello/hello.go 文件中，处理 hello 函数现在返回的错误以及非错误值。</li></ol> <p>将以下代码粘贴到 hello.go 中。</p> <div class="language-Go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;log&quot;</span>

    <span class="token string">&quot;example.com/greetings&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Set properties of the predefined Logger, including</span>
    <span class="token comment">// the log entry prefix and a flag to disable printing</span>
    <span class="token comment">// the time, source file, and line number.</span>
    log<span class="token punctuation">.</span><span class="token function">SetPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;greetings: &quot;</span><span class="token punctuation">)</span>
    log<span class="token punctuation">.</span><span class="token function">SetFlags</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token comment">// Request a greeting message.</span>
    message<span class="token punctuation">,</span> err <span class="token operator">:=</span> greetings<span class="token punctuation">.</span><span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// If an error was returned, print it to the console and</span>
    <span class="token comment">// exit the program.</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// If no error was returned, print the returned message</span>
    <span class="token comment">// to the console.</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在此代码中，您：</p> <ul><li>将 log 日志包配置为在其日志消息的开头打印命令名（“问候语：”），不带时间戳或源文件信息。</li> <li>将两个 Hello 返回值（包括错误）分配给变量。</li> <li>将 Hello 参数从 Gladys 的名称更改为空字符串，这样您就可以尝试错误处理代码。</li> <li>查找非零错误值。在这种情况下继续下去是没有意义的。</li> <li>使用标准库的 log 包中的函数来输出错误信息。如果出现错误，则使用 log 日志包的 Fatal 函数打印错误并停止程序。</li></ul> <ol start="3"><li>在 hello 目录的命令行中，运行 hello.go 以确认代码是否有效。</li></ol> <p>现在您传入了一个空名称，您将得到一个错误。</p> <div class="language-Go extra-class"><pre class="language-go"><code>$ <span class="token keyword">go</span> run <span class="token punctuation">.</span>
greetings<span class="token punctuation">:</span> empty name
exit status <span class="token number">1</span>
</code></pre></div><p>这是 Go 中常见的错误处理：将错误作为值返回，以便调用方可以检查它。</p> <p>接下来，您将使用 Go 切片来返回随机选择的问候语。</p> <h2 id="返回随机问候语"><a href="#返回随机问候语" class="header-anchor">#</a> 返回随机问候语</h2> <p>在本节中，您将更改代码，使其不再每次返回一个问候语，而是返回几个预定义的问候语消息中的一个。</p> <blockquote><p>注意：本主题是从创建 Go 模块开始的多部分教程的一部分。</p></blockquote> <p>为此，您将使用 Go 切片类型。切片就像一个数组，只是它的大小随着添加和删除项目而动态变化。切片（Slice）是 Go 语言最有用的类型之一。</p> <p>您将添加一个小片段来包含三条问候消息，然后让代码随机返回其中一条消息。有关切片（Slice）的更多信息，请参阅 Go 官方博客中的<a href="https://docs.studygolang.com/blog/slices-intro" target="_blank" rel="noopener noreferrer">Go 切片<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>在 greetings/greetings.go 中，更改代码，使其看起来如下所示。</p> <div class="language-Go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> greetings

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;errors&quot;</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;math/rand&quot;</span>
    <span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// Hello returns a greeting for the named person.</span>
<span class="token keyword">func</span> <span class="token function">Hello</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If no name was given, return an error with a message.</span>
    <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;empty name&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Create a message using a random format.</span>
    message <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token function">randomFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
    <span class="token keyword">return</span> message<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// init sets initial values for variables used in the function.</span>
<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// randomFormat returns one of a set of greeting messages. The returned</span>
<span class="token comment">// message is selected at random.</span>
<span class="token keyword">func</span> <span class="token function">randomFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token comment">// A slice of message formats.</span>
    formats <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
        <span class="token string">&quot;Hi, %v. Welcome!&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Great to see you, %v!&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Hail, %v! Well met!&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Return a randomly selected message format by specifying</span>
    <span class="token comment">// a random index for the slice of formats.</span>
    <span class="token keyword">return</span> formats<span class="token punctuation">[</span>rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>formats<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在此代码中，您：</p> <ul><li>添加一个 randomFormat 函数，该函数可为问候语返回随机选择的格式。请注意，randomFormat 以小写字母开头，使其只能由自己包中的代码访问（换句话说，它不导出）。</li> <li>在 randomFormat 中，用三种消息格式声明一个 formats 切片。在声明切片时，可以省略括号中的大小，如下所示：[]字符串。这告诉 Go，片下面的数组大小可以动态更改。</li> <li>使用 math/rand 包生成一个随机数，用于从切片中选择项目。</li> <li>添加一个 init 函数，用当前时间为 rand 包设定种子。Go 在初始化全局变量后，在程序启动时自动执行 init 函数。有关 init 函数的更多信息，请参阅<a href="http://docscn.studygolang.com/doc/effective_go.html#init" target="_blank" rel="noopener noreferrer">Effective Go<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li> <li>在 Hello 中，调用 randomFormat 函数来获取要返回的消息的格式，然后将格式和名称值一起使用来创建消息。</li> <li>像以前一样返回消息（或错误）。</li></ul> <ol start="2"><li>在 hello/hello.go 中，更改代码，使其看起来如下所示。</li></ol> <p>您只是将 Gladys 的名字（或者其他名字，如果您愿意的话）作为参数添加到 Hello.go 中的 Hello 函数调用中。</p> <div class="language-Go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;log&quot;</span>

    <span class="token string">&quot;example.com/greetings&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Set properties of the predefined Logger, including</span>
    <span class="token comment">// the log entry prefix and a flag to disable printing</span>
    <span class="token comment">// the time, source file, and line number.</span>
    log<span class="token punctuation">.</span><span class="token function">SetPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;greetings: &quot;</span><span class="token punctuation">)</span>
    log<span class="token punctuation">.</span><span class="token function">SetFlags</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token comment">// Request a greeting message.</span>
    message<span class="token punctuation">,</span> err <span class="token operator">:=</span> greetings<span class="token punctuation">.</span><span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">&quot;Gladys&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// If an error was returned, print it to the console and</span>
    <span class="token comment">// exit the program.</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// If no error was returned, print the returned message</span>
    <span class="token comment">// to the console.</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>在 hello 目录的命令行中，运行 hello.go 以确认代码是否有效。多次运行它，可以注意到问候语发生了变化。</li></ol> <div class="language-Go Command extra-class"><pre class="language-go"><code>$ <span class="token keyword">go</span> run <span class="token punctuation">.</span>
Great to see you<span class="token punctuation">,</span> Gladys<span class="token operator">!</span>

$ <span class="token keyword">go</span> run <span class="token punctuation">.</span>
Hi<span class="token punctuation">,</span> Gladys<span class="token punctuation">.</span> Welcome<span class="token operator">!</span>

$ <span class="token keyword">go</span> run <span class="token punctuation">.</span>
Hail<span class="token punctuation">,</span> Gladys<span class="token operator">!</span> Well met<span class="token operator">!</span>
</code></pre></div><p>接下来，您将使用一个 Slice 切片来问候多个人。</p> <h2 id="为多人返回问候语"><a href="#为多人返回问候语" class="header-anchor">#</a> 为多人返回问候语</h2> <p>在您将对模块代码进行的最后一次更改中，您将添加在一个请求中获得多人问候的支持功能。换句话说，您将处理多值输入，然后将该输入中的值与多值输出配对。要做到这一点，您需要将一组名称传递给一个函数，该函数可以为每个名称返回一个问候语。</p> <blockquote><p>注意：本主题是从创建 Go 模块开始的多部分教程的一部分。</p></blockquote> <p>但有一个问题。将 Hello 函数的参数从单个名称更改为一组名称将更改函数的签名。如果您已经发布了 example.com/greetings 模块，并且用户已经编写了调用 Hello 的代码，那么这种更改将破坏他们的程序。</p> <p>在这种情况下，更好的选择是用不同的名称编写一个新函数。新功能将采用多个参数。这保留了旧功能以实现向后兼容性。</p> <ol><li>在 greetings/greetings.go 中，更改代码，使其看起来如下所示:</li></ol> <div class="language-Go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> greetings

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;errors&quot;</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;math/rand&quot;</span>
    <span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// Hello returns a greeting for the named person.</span>
<span class="token keyword">func</span> <span class="token function">Hello</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If no name was given, return an error with a message.</span>
    <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;empty name&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Create a message using a random format.</span>
    message <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token function">randomFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
    <span class="token keyword">return</span> message<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// Hellos returns a map that associates each of the named people</span>
<span class="token comment">// with a greeting message.</span>
<span class="token keyword">func</span> <span class="token function">Hellos</span><span class="token punctuation">(</span>names <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// A map to associate names with messages.</span>
    messages <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
    <span class="token comment">// Loop through the received slice of names, calling</span>
    <span class="token comment">// the Hello function to get a message for each name.</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> name <span class="token operator">:=</span> <span class="token keyword">range</span> names <span class="token punctuation">{</span>
        message<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">Hello</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
        <span class="token punctuation">}</span>
        <span class="token comment">// In the map, associate the retrieved message with</span>
        <span class="token comment">// the name.</span>
        messages<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> message
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> messages<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// Init sets initial values for variables used in the function.</span>
<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// randomFormat returns one of a set of greeting messages. The returned</span>
<span class="token comment">// message is selected at random.</span>
<span class="token keyword">func</span> <span class="token function">randomFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token comment">// A slice of message formats.</span>
    formats <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
        <span class="token string">&quot;Hi, %v. Welcome!&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Great to see you, %v!&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Hail, %v! Well met!&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Return one of the message formats selected at random.</span>
    <span class="token keyword">return</span> formats<span class="token punctuation">[</span>rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>formats<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在此代码中，您：</p> <ul><li>添加一个 Hellos 函数，该函数的参数是一组名称，而不是一个单独的名称。此外，您还可以将其返回类型之一从 string 更改为 map，以便返回映射到问候语的名称。</li> <li>让新的 Hellos 函数调用现有的 Hello 函数。这有助于减少重复，同时保留两个功能。</li> <li>创建一个消息 map，将每个接收到的名称（作为关键字）与生成的消息（作为值）关联起来。在 Go 中，您可以使用以下语法初始化映射：make（map[key-type]value-type）。您可以使用 Hellos 函数将此映射返回给调用者。有关地图的更多信息，请参阅 Go 博客上的<a href="https://docs.studygolang.com/blog/maps" target="_blank" rel="noopener noreferrer">Go maps in action<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li> <li>循环查看函数接收到的名称，检查每个名称是否都有非空值，然后将消息与每个名称关联起来。在这个 for 循环中，range 返回两个值：循环中当前项的索引和项值的副本。您不需要索引，所以您使用 Go blank 标识符（下划线）来忽略它。有关详细信息，请参阅 Effective Go 中的<a href="http://docscn.studygolang.com/doc/effective_go.html#blank" target="_blank" rel="noopener noreferrer">The blank identifier<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li></ul> <ol start="2"><li>在 hello/hello.go 调用代码中，传递一组名称，然后打印返回的名称/消息 Map 的内容。</li></ol> <p>在 hello.go 中，更改您的代码，使其看起来如下所示。</p> <div class="language-Go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;log&quot;</span>

    <span class="token string">&quot;example.com/greetings&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Set properties of the predefined Logger, including</span>
    <span class="token comment">// the log entry prefix and a flag to disable printing</span>
    <span class="token comment">// the time, source file, and line number.</span>
    log<span class="token punctuation">.</span><span class="token function">SetPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;greetings: &quot;</span><span class="token punctuation">)</span>
    log<span class="token punctuation">.</span><span class="token function">SetFlags</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token comment">// A slice of names.</span>
    names <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;Gladys&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Samantha&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Darrin&quot;</span><span class="token punctuation">}</span>

    <span class="token comment">// Request greeting messages for the names.</span>
    messages<span class="token punctuation">,</span> err <span class="token operator">:=</span> greetings<span class="token punctuation">.</span><span class="token function">Hellos</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// If no error was returned, print the returned map of</span>
    <span class="token comment">// messages to the console.</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>messages<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过这些更改，您：</p> <ul><li>创建一个名称变量，作为包含三个名称的切片类型。</li> <li>将 names 变量作为参数传递给 Hellos 函数。</li> <li>在命令行中，切换到包含 hello/hello.go 的目录，然后使用 go-run 确认代码是否有效。</li> <li>输出应该是将名称与消息关联起来的映射的字符串表示，如下所示：</li></ul> <div class="language-Go Command extra-class"><pre class="language-go"><code>$ <span class="token keyword">go</span> run <span class="token punctuation">.</span>
<span class="token keyword">map</span><span class="token punctuation">[</span>Darrin<span class="token punctuation">:</span>Hail<span class="token punctuation">,</span> Darrin<span class="token operator">!</span> Well met<span class="token operator">!</span> Gladys<span class="token punctuation">:</span>Hi<span class="token punctuation">,</span> Gladys<span class="token punctuation">.</span> Welcome<span class="token operator">!</span> Samantha<span class="token punctuation">:</span>Hail<span class="token punctuation">,</span> Samantha<span class="token operator">!</span> Well met<span class="token operator">!</span><span class="token punctuation">]</span>
</code></pre></div><p>本主题介绍了用于表示名称/值对的映射。它还引入了通过为模块中的新功能或更改的功能实现新功能来保持向后兼容性的想法。有关向后兼容性的更多信息，请参阅<a href="https://docs.studygolang.com/blog/module-compatibility" target="_blank" rel="noopener noreferrer">保持模块兼容<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>接下来，您将使用内置的 Go 功能为代码创建一个单元测试。</p> <h2 id="创建单元测试"><a href="#创建单元测试" class="header-anchor">#</a> 创建单元测试</h2> <p>现在您已经将代码放到了一个稳定的位置（顺便说一句，做得很好），添加一个测试。在开发过程中测试代码可能会暴露出在您进行更改时出现的错误。在本主题中，您将为 Hello 函数添加一个测试。</p> <blockquote><p>注意：本主题是从创建 Go 模块开始的多部分教程的一部分。</p></blockquote> <p>Go 内置的对单元测试的支持使得在进行测试时更容易。具体来说，使用命名约定、Go 的测试包和 Go 测试命令，您可以快速编写和执行测试。</p> <ol><li>在 greetings 目录中，创建一个名为 greetings_test.go 的文件。</li></ol> <p>以_test.go 结尾的文件名告诉 go-test 命令此文件包含测试函数。</p> <ol start="2"><li>在 greetings_test.go 文件中，录入以下代码并保存文件：</li></ol> <div class="language-Go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> greetings

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;testing&quot;</span>
    <span class="token string">&quot;regexp&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// TestHelloName calls greetings.Hello with a name, checking</span>
<span class="token comment">// for a valid return value.</span>
<span class="token keyword">func</span> <span class="token function">TestHelloName</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name <span class="token operator">:=</span> <span class="token string">&quot;Gladys&quot;</span>
    want <span class="token operator">:=</span> regexp<span class="token punctuation">.</span><span class="token function">MustCompile</span><span class="token punctuation">(</span><span class="token string">`\b`</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">`\b`</span><span class="token punctuation">)</span>
    msg<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">&quot;Gladys&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token operator">!</span>want<span class="token punctuation">.</span><span class="token function">MatchString</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token operator">||</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        t<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">`Hello(&quot;Gladys&quot;) = %q, %v, want match for %#q, nil`</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> err<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// TestHelloEmpty calls greetings.Hello with an empty string,</span>
<span class="token comment">// checking for an error.</span>
<span class="token keyword">func</span> <span class="token function">TestHelloEmpty</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    msg<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> msg <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token operator">||</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        t<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">`Hello(&quot;&quot;) = %q, %v, want &quot;&quot;, error`</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在此代码中，您：</p> <ul><li>在与您正在测试的代码相同的包中实现测试函数。</li> <li>创建两个测试函数来测试问候语。Hello 函数。测试函数名称的形式为 TestName，其中 Name 表示特定测试的内容。此外，测试函数将指向测试包的 testing.T 类型的指针作为参数。您可以使用此参数的方法从测试中进行报告和日志记录。</li> <li>执行两项测试：
<ul><li>TestHelloName 调用 Hello 函数，传递一个名称值，该函数应该能够使用该名称值返回有效的响应消息。如果调用返回错误或意外响应消息（其中不包括您传入的名称），则使用 t 参数的 Fatalf 方法将消息打印到控制台并结束执行。</li> <li>TestHelloEmpty 使用一个空字符串调用 Hello 函数。此测试旨在确认您的错误处理是否有效。如果调用返回非空字符串或没有错误，则使用 t 参数的 Fatalf 方法将消息打印到控制台并结束执行。</li></ul></li></ul> <ol start="3"><li>在 greetings 目录的命令行中，运行 go test 命令来执行测试。</li></ol> <p>go test 命令在测试文件（名称以_test.go 结尾）中执行测试函数（名称以 test 开头）。您可以添加-v 标志来获得详细的输出，其中列出了所有测试及其结果。</p> <p>测试应该通过。</p> <div class="language-Go Test extra-class"><pre class="language-go"><code>$ <span class="token keyword">go</span> test
PASS
ok      example<span class="token punctuation">.</span>com<span class="token operator">/</span>greetings   <span class="token number">0</span><span class="token punctuation">.</span>364s

$ <span class="token keyword">go</span> test <span class="token operator">-</span>v
<span class="token operator">==</span><span class="token operator">=</span> RUN   TestHelloName
<span class="token operator">--</span><span class="token operator">-</span> PASS<span class="token punctuation">:</span> TestHelloName <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">.</span>00s<span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token operator">=</span> RUN   TestHelloEmpty
<span class="token operator">--</span><span class="token operator">-</span> PASS<span class="token punctuation">:</span> TestHelloEmpty <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">.</span>00s<span class="token punctuation">)</span>
PASS
ok      example<span class="token punctuation">.</span>com<span class="token operator">/</span>greetings   <span class="token number">0</span><span class="token punctuation">.</span>372s
</code></pre></div><ol start="4"><li>中断 greetings.Hello 函数用于查看未通过的测试。</li></ol> <p>TestHelloName 测试函数检查您指定为 Hello 函数参数的名称的返回值。要查看失败的测试结果，请更改 greetings.Hello 函数，使其不再包含名称。</p> <p>在 greetings/greetings.go 中，粘贴以下代码来代替 Hello 函数。请注意，高亮显示的行会更改函数返回的值，就好像名称参数被意外删除了一样。</p> <div class="language-Go Test extra-class"><pre class="language-go"><code><span class="token comment">// Hello returns a greeting for the named person.</span>
<span class="token keyword">func</span> <span class="token function">Hello</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If no name was given, return an error with a message.</span>
    <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;empty name&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Create a message using a random format.</span>
    <span class="token comment">// message := fmt.Sprintf(randomFormat(), name)</span>
    message <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprint</span><span class="token punctuation">(</span><span class="token function">randomFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> message<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="5"><li>在 greetings 目录的命令行中，运行 go test 来执行测试。</li></ol> <p>这一次，在没有-v 标志的情况下运行 go 测试。输出将只包括失败测试的结果，当您有很多测试时，这可能很有用。TestHelloName 测试应该失败——TestHelloEmpty 仍然通过。</p> <div class="language-Go Test extra-class"><pre class="language-go"><code>$ <span class="token keyword">go</span> test
<span class="token operator">--</span><span class="token operator">-</span> FAIL<span class="token punctuation">:</span> TestHelloName <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">.</span>00s<span class="token punctuation">)</span>
    greetings_test<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">:</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">&quot;Gladys&quot;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;Hail, %v! Well met!&quot;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span><span class="token boolean">nil</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> want match <span class="token keyword">for</span> <span class="token string">`\bGladys\b`</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
FAIL
exit status <span class="token number">1</span>
FAIL    example<span class="token punctuation">.</span>com<span class="token operator">/</span>greetings   <span class="token number">0</span><span class="token punctuation">.</span>182s
</code></pre></div><p>在下一个（也是最后一个）主题中，您将看到如何编译和安装代码以在本地运行。</p> <h2 id="go-应用程序的编译和安装"><a href="#go-应用程序的编译和安装" class="header-anchor">#</a> Go 应用程序的编译和安装</h2> <p>在最后一个主题中，您将学习几个新的 go 命令。虽然 go run 命令是在频繁更改时编译和运行程序的有用快捷方式，但它不会生成二进制可执行文件。</p> <p>本主题介绍了用于生成代码的两个附加命令：</p> <ul><li>go-build 命令编译包及其依赖项，但不安装结果。</li> <li>go install 命令编译并安装程序包。</li></ul> <blockquote><p>注意：本主题是从创建 Go 模块开始的多部分教程的一部分。</p></blockquote> <ol><li>在 hello 目录的命令行中，运行 go-build 命令将代码编译为可执行文件。</li></ol> <div class="language-Go Command extra-class"><pre class="language-go"><code> <span class="token keyword">go</span> build
</code></pre></div><ol start="2"><li>在 hello 目录中的命令行中，运行新的 hello 可执行文件以确认代码是否有效。</li></ol> <p>请注意，您的结果可能会有所不同，这取决于您在测试后是否更改了 greetings.go 代码。</p> <ul><li>Linux 或 Mac 系统下</li></ul> <div class="language-Go Command extra-class"><pre class="language-go"><code>$ <span class="token punctuation">.</span><span class="token operator">/</span>hello
<span class="token keyword">map</span><span class="token punctuation">[</span>Darrin<span class="token punctuation">:</span>Great to see you<span class="token punctuation">,</span> Darrin<span class="token operator">!</span> Gladys<span class="token punctuation">:</span>Hail<span class="token punctuation">,</span> Gladys<span class="token operator">!</span> Well met<span class="token operator">!</span> Samantha<span class="token punctuation">:</span>Hail<span class="token punctuation">,</span> Samantha<span class="token operator">!</span> Well met<span class="token operator">!</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>Windows 系统下</li></ul> <div class="language-Go Command extra-class"><pre class="language-go"><code>$ hello<span class="token punctuation">.</span>exe
<span class="token keyword">map</span><span class="token punctuation">[</span>Darrin<span class="token punctuation">:</span>Great to see you<span class="token punctuation">,</span> Darrin<span class="token operator">!</span> Gladys<span class="token punctuation">:</span>Hail<span class="token punctuation">,</span> Gladys<span class="token operator">!</span> Well met<span class="token operator">!</span> Samantha<span class="token punctuation">:</span>Hail<span class="token punctuation">,</span> Samantha<span class="token operator">!</span> Well met<span class="token operator">!</span><span class="token punctuation">]</span>
</code></pre></div><p>您已将应用程序编译为可执行文件，以便运行它。但要当前运行它，您的提示需要位于可执行文件的目录中，或者指定可执行文件路径。</p> <p>接下来，您将安装可执行文件，这样您就可以在不指定其路径的情况下运行它。</p> <ol start="3"><li>查找 Go 安装路径，Go 命令将在其中安装当前软件包。</li></ol> <p>您可以通过运行 go list 命令来发现安装路径，如以下示例所示：</p> <div class="language-Go Command extra-class"><pre class="language-go"><code>$ <span class="token keyword">go</span> list <span class="token operator">-</span>f '<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">.</span>Target<span class="token punctuation">}</span><span class="token punctuation">}</span>'
</code></pre></div><p>例如，命令的输出可能会说/home/gopher/bin/hello，这意味着二进制文件被安装到/home/gopaher/bin。在下一步中，您将需要此安装目录。</p> <ol start="4"><li>将 Go 安装目录添加到系统的 shell 路径中。</li></ol> <p>这样，您就可以运行程序的可执行文件，而无需指定可执行文件的位置。</p> <ul><li>Linux 或 Mac 系统</li></ul> <div class="language-Shell extra-class"><pre class="language-shell"><code>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:/path/to/your/install/directory
</code></pre></div><ul><li>Windows 系统</li></ul> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">set</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>%<span class="token environment constant">PATH</span>%<span class="token punctuation">;</span>C:<span class="token punctuation">\</span>path<span class="token punctuation">\</span>to<span class="token punctuation">\</span>your<span class="token punctuation">\</span>install<span class="token punctuation">\</span>directory
</code></pre></div><p>另一种选择是，如果您的 shell 路径中已经有一个类似$HOME/bin 的目录，并且您想在那里安装 Go 程序，则可以使用 Go-env 命令设置 GOBIN 变量来更改安装目标：</p> <div class="language-Go Command extra-class"><pre class="language-go"><code><span class="token keyword">go</span> env <span class="token operator">-</span>w GOBIN<span class="token operator">=</span><span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token operator">/</span>your<span class="token operator">/</span>bin
</code></pre></div><p>或</p> <div class="language-Go Command extra-class"><pre class="language-go"><code>$ <span class="token keyword">go</span> env <span class="token operator">-</span>w GOBIN<span class="token operator">=</span>C<span class="token punctuation">:</span>\path\to\your\bin
</code></pre></div><ol start="5"><li>更新完 shell 路径后，运行 go-install 命令编译并安装包</li></ol> <div class="language-Go Command extra-class"><pre class="language-go"><code>$ <span class="token keyword">go</span> install
</code></pre></div><ol start="6"><li>只需键入应用程序的名称即可运行应用程序。为了让这变得有趣，打开一个新的命令提示符，并在其他目录中运行 hello 可执行文件名。</li></ol> <div class="language-Go Commond extra-class"><pre class="language-go"><code>$ hello
<span class="token keyword">map</span><span class="token punctuation">[</span>Darrin<span class="token punctuation">:</span>Hail<span class="token punctuation">,</span> Darrin<span class="token operator">!</span> Well met<span class="token operator">!</span> Gladys<span class="token punctuation">:</span>Great to see you<span class="token punctuation">,</span> Gladys<span class="token operator">!</span> Samantha<span class="token punctuation">:</span>Hail<span class="token punctuation">,</span> Samantha<span class="token operator">!</span> Well met<span class="token operator">!</span><span class="token punctuation">]</span>
</code></pre></div><p>Go 教程到此结束！</p></div></div>  <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/GoTour/002/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Go语言入门教程</div></a> <a href="/pages/GoTour/004/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">教程：使用Go和Gin开发RESTful API</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/GoTour/002/" class="prev">Go语言入门教程</a></span> <span class="next"><a href="/pages/GoTour/004/">教程：使用Go和Gin开发RESTful API</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:qingshansima@outlook.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/qingshansima" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
    Copyright © 2024-2023
    <span>飞翔的土肥猿 | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7d1116cd.js" defer></script><script src="/assets/js/2.f6c26bfc.js" defer></script><script src="/assets/js/3.7a437186.js" defer></script><script src="/assets/js/21.51a48402.js" defer></script>
  </body>
</html>
